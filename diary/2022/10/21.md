---
title: "日記(自宅インフラ新章)"
description:
date: 2022-10-21
draft: false
categories:
  - "diary"
tags:
  - "infra"
  - "hobby"
---

# 週報、月報を生成してみる

今一日ごとにかいてる。

複数日どうなってんのとかわからんので、試験的にscriptをつくる。

刺激をかんじたかったけど、しらべてみると腰重すぎてなにも手がでなかった。

だからRubyでやる。

# インフラであそぶ

Cisco 1812Jとraspi8台を二つのNW(VLAN)にわけてあそぶ。

金土日つかってやる。

内訳としてはCiscoルータを起点にして、DMZとプライベートNWとわけて構築する。

なお、外部に公開するわけではないので

自分ですでに構築している自宅NWにアタッチして、

そこの別端末から通信テストをおこなう。

## DMZ

### Level 1

リバースプロキシ*1

### Level 2

Session*1

Mail*1

## プライベート

### Level 1

Web*1

DB*1

DNS(DNS,DHCP)*1

### Level 2

Web*1

DB*1

Mail*1

## クリア条件(Level 1)

### Web通信(80, 443)

* private内部の端末
  * IPアドレスをDHCPから取得できている。
  * NW内部で内部端末の名前解決できる。
  * 外部からの直接通信はとおさない。
* privateのWebサーバの80コンテンツを**リバプロ経由で**取得できる。
  * この際、DBの指定情報を表示する機能を提供するページを用意しているので、DBへの接続もできないと提供はできない。
