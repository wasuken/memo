---
title: "日記だよ"
description:
date: 2023-12-20
draft: false
categories:
  - "diary"
tags:
  - "life"
---

# raspi にニュースをよませたい

voicevox とかいらんくて

[NHK ラジオニュース](https://www.nhk.or.jp/s-media/news/podcast/list/v1/all.xml)

があったので、こちらを parse して mp3 の URL リストを抽出してそこから

mp3 を抽出する。

```python
import xml.etree.ElementTree as ET
import requests
import os
import sys
from pydub import AudioSegment

def download_mp3(url, filename):
    response = requests.get(url)
    if response.status_code == 200:
        with open(filename, 'wb') as file:
            file.write(response.content)

def extract_mp3_urls(xml_file):
    tree = ET.parse(xml_file)
    root = tree.getroot()
    mp3_urls = []
    for item in root.findall('.//item'):
        enclosure = item.find('enclosure')
        if enclosure is not None:
            url = enclosure.get('url')
            if url and url.endswith('.mp3'):
                mp3_urls.append(url)
    return mp3_urls

def combine_mp3(files, output_file):
    combined = AudioSegment.empty()
    for file in files:
        sound = AudioSegment.from_mp3(file)
        combined += sound
    combined.export(output_file, format='mp3')

if __name__ == '__main__':
  output_dir = "./output"
  # XMLファイルパスをコマンドライン引数でわたす
  xml_file = sys.argv[1]

  # mp3ファイルのURLを抽出
  mp3_urls = extract_mp3_urls(xml_file)

  # outputディレクトリなければ作成
  if not os.path.isdir(output_dir):
    os.mkdir(output_dir)

  print("# Start downloading.")
  # mp3ファイルをダウンロードして保存
  downloaded_files = []
  num_urls = len(mp3_urls)
  for i, url in enumerate(mp3_urls):
    print(f"	[{i+1}/{num_urls}]{url} downloading...")
    filename = f'{output_dir}/{i}.mp3'
    download_mp3(url, filename)
    downloaded_files.append(filename)
    print("	...Downloaded.")

  print("# Finish downloading.")

# ここはよくかんがえたいらん
# すべてのmp3ファイルを結合
# output_file = 'combined.mp3'
# combine_mp3(downloaded_files, output_file)
# # 一時ファイルの削除
# for file in downloaded_files:
#     os.remove(file)

```

休憩時間中にかいた。

上記は実際にうごいたコードにいくつか手直しをくわえたコードになる。

ちなみに事前に pydub をインストールする必要がある。

# mental

悪=-1, 普=0, 良=1

## 基礎表

| 項目       | 評価 |
| ---------- | ---- |
| 気分の変化 | 1    |
| 睡眠質     | 1    |
| 睡眠寝付き | 0    |
| 睡眠目覚め | -1   |
| 活動レベル | 0    |

## 食事

### 食欲表

| 項目 | 評価 |
| ---- | ---- |
| 朝   | 1    |
| 昼   | 1    |
| 夜   | 1    |

### 朝

とん汁ののこりに玉葱と茸いれたやつ

### 昼

とん汁ののこりに玉葱と茸いれたやつ

コーンフレークのみ

### 夜

デニーズでスパゲティとサラダくった。

## 活動内容

### 思考パターン表

| 項目 | 評価 |
| ---- | ---- |
| 朝   | -1   |
| 昼   | -1   |
| 夜   | 0    |

## ストレス要因

おもいっきり寝坊したけどリモートだから遅刻ではなかった。うん。。。

## 思考パターン

今日水曜日だったから定時で帰宅キメた。

水曜日はデニーズで歩数、読書、開発の進捗をだす日だからな。
